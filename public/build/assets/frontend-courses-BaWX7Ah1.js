document.addEventListener("DOMContentLoaded",function(){const s=document.getElementById("filterForm"),c=document.getElementById("coursesWrapper"),o=document.getElementById("coursesContainer"),l=document.getElementById("resetBtn");if(s){s.addEventListener("submit",function(n){n.preventDefault(),u(new FormData(this))}),document.querySelectorAll(".filter-input").forEach(n=>{n.addEventListener("change",function(){s.dispatchEvent(new Event("submit"))})});const t=document.querySelector('[name="keyword"]');let i;t&&t.addEventListener("input",function(){clearTimeout(i),i=setTimeout(()=>{s.dispatchEvent(new Event("submit"))},500)})}l&&l.addEventListener("click",function(e){e.preventDefault(),s.reset(),u(new FormData)});function u(e){m(),setTimeout(()=>{c.scrollIntoView({behavior:"smooth",block:"start"})},100);const t=new URLSearchParams(e),n=`${s.getAttribute("data-url")}?${t.toString()}`;fetch(n,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html"}}).then(r=>r.text()).then(r=>{const h=new DOMParser().parseFromString(r,"text/html").querySelector("#coursesContainer");h&&(o.style.opacity="0",setTimeout(()=>{o.innerHTML=h.innerHTML,o.style.opacity="1",o.classList.add("fade-in"),d(),c.scrollIntoView({behavior:"smooth",block:"start"}),window.history.pushState({},"",n),a()},300))}).catch(r=>{console.error("Error loading courses:",r),a(),window.location.href=n})}function d(){document.querySelectorAll("#paginationContainer .page-link").forEach(t=>{t.addEventListener("click",function(i){i.preventDefault();const n=this.getAttribute("href");n&&!this.parentElement.classList.contains("disabled")&&p(n)})})}function p(e){m(),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100),fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html"}}).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.text()}).then(t=>{const r=new DOMParser().parseFromString(t,"text/html").querySelector("#coursesContainer");r&&(o.style.opacity="0",setTimeout(()=>{o.innerHTML=r.innerHTML,o.style.opacity="1",o.classList.add("fade-in"),d(),window.scrollTo({top:0,behavior:"smooth"}),window.history.pushState({},"",e),a()},300))}).catch(t=>{console.error("Error:",t),a(),window.location.href=e})}function m(){a();const e=document.createElement("div");e.className="loading-overlay",e.id="loadingOverlay",e.innerHTML=`
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Loading Courses...</p>
            </div>
        `,c.appendChild(e)}function a(){const e=document.getElementById("loadingOverlay");e&&e.remove()}d()});
