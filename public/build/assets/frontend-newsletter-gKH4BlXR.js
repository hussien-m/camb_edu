const i=document.getElementById("newsletter-form");i&&i.addEventListener("submit",function(o){o.preventDefault();const a=this,s=document.getElementById("newsletter-email").value,t=document.getElementById("newsletter-message"),n=a.querySelector('button[type="submit"]');if(!s||!s.includes("@")){t.className="text-danger",t.textContent="Please enter a valid email address.";return}n.disabled=!0,n.innerHTML='<i class="fas fa-spinner fa-spin"></i>',fetch(a.getAttribute("data-action"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({email:s})}).then(e=>e.json().then(r=>({status:e.status,data:r}))).then(({status:e,data:r})=>{t.className=e===200||e===201?"text-success":"text-danger",t.textContent=r.message||"An error occurred. Please try again.",(e===200||e===201)&&a.reset()}).catch(e=>{t.className="text-danger",t.textContent="An error occurred. Please try again."}).finally(()=>{n.disabled=!1,n.innerHTML='<i class="fas fa-paper-plane"></i>',setTimeout(()=>{t.textContent=""},5e3)})});
